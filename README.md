# Recipe API

This project implements the API for Recipe model.

## Overview  
This server was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.

The underlying library integrating OpenAPI to SpringBoot is [springfox](https://github.com/springfox/springfox)

The API includes H2 inMemory database for creating the necessary database schema and objects.

### Model layers

- The (API) interface layer model classes are generated using the OpenApi generator in package `com.mendix.recipe.api.model.gennerated` and are not commited to the repository.
- The persistence layer model classed are defined in the package `com.mendix.recipe.dal.relational.model`.
- The models are transferred between both layers using the data transfer object classed in the package `com.mendix.recipe.model` 
  using the repositories in `com.mendix.recipe.repository.implementation` and services in `com.mendix.recipe.service`.

## Requirements
- Java 11 SDK

# Development notes
## Building
- In the root of the repo type:

```
./mvnw clean package
```

- Running that maven goal will  generate the openapi based controllers and models and compile the project

## Local H2 console
Start H2 console by adding in URL /h2-console to check database objects
``` 

## Running

- In the root of the repo type:

```
./mvnw spring-boot:run 
```

## Testing

### Unit tests
- In the root of the repo type:
```
./mvnw test 
```

## Accessing API documentation
- You can view the API documentation in swagger-ui by pointing to [http://localhost:8080/swagger-ui.html#/](http://localhost:8080/swagger-ui.html#/)
- The full API description can be downloaded as a JSON file from [http://localhost:8080/api-docs](http://localhost:8080/api-docs)


### HTTP Port conflicts 
You can change the default port value in application.properties.

### Debugging SQL statements
When you need to see the generated SQL statements as debug messages add the following lines to the application.properties file:

```
security.basic.enabled = false
management.security.enabled = false
spring.datasource.platform = h2
spring.datasource.url = jdbc:h2:mem:test
spring.datasource.driverClassName = org.h2.Driver
spring.datasource.username = sa
spring.datasource.password = 
spring.jpa.database-platform = org.hibernate.dialect.H2Dialect
spring.h2.console.enabled = true
logging.level.org.springframework.jdbc.datasource.init.ScriptUtils =DEBUG
